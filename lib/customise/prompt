once
provides: newprompt
needs: bracket$

\ a more informative prompt than the very minimal prompt in yoda
: newprompt  ( -- )
   compiling if                     \ no full prompt during compilation, but just a vertical bar
      "|   " type$
      0 return
   then

   " ok" type$                      \ otherwise (interpreting) an ok prompt

   #unresolved ?dup if              \ show count of unresolved forward references if any
      space
      convert "()" bracket$ type$
   then

   depth ?dup if                    \ show stack indicator, one dot per stack item
      space                         \ up to some limit. above that limit, ">" indicates "more"
      ".........>" left$ type$
   then

   cr
;

' newprompt is prompt               \ activate this replacement prompt
