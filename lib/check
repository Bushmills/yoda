( tools for automated test suite )

have testcount lest   errors off  testcount off   done
\ already loaded? don't reload, reset error log instead

need link
create errors 0 ,
create testcount 0 ,

: report  ( -- )
        "failed test(s) " type$
        errors
        begin @
        ?dup while
           dup cell+ @ u.
        repeat  ;

: tests    ( -- )
        errors off
        testcount off ;

: check    ( -- )
        errors @
        if    report
        else  "No errors" type$
        then  cr   ;

: expected ( x1 x2 -- )
        testcount inc
        = unless
           errors link
           testcount @ ,  ;
